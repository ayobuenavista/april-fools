(window.webpackJsonp=window.webpackJsonp||[]).push([[102],{2772:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=f(t(11));function o(e,n){(null==n||n>e.length)&&(n=e.length);for(var i=0,t=new Array(n);i<n;i++)t[i]=e[i];return t}function c(e,n,t,r,o,c,l){try{var d=e[c](l),f=d.value}catch(e){return void t(e)}d.done?n(f):Promise.resolve(f).then(r,o)}function l(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function d(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function f(e){return e&&e.__esModule?e:{default:e}}function h(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},n=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(source).filter((function(e){return Object.getOwnPropertyDescriptor(source,e).enumerable})))),n.forEach((function(n){d(e,n,source[n])}))}return e}function m(e,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):function(object,e){var n=Object.keys(object);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(object);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),n.push.apply(n,t)}return n}(Object(source)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(source,n))})),e}function v(source,e){if(null==source)return{};var n,i,t=function(source,e){if(null==source)return{};var n,i,t={},r=Object.keys(source);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||(t[n]=source[n]);return t}(source,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(source);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(source,n)&&(t[n]=source[n])}return t}function y(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"==typeof e)return o(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return o(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e){for(var n=void 0,t=e[0],i=1;i<e.length;){var r=e[i],o=e[i+1];if(i+=2,("optionalAccess"===r||"optionalCall"===r)&&null==t)return;if("access"===r||"optionalAccess"===r)n=t,t=o(t);else if("call"===r||"optionalCall"===r){var c;t=o((function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return(c=t).call.apply(c,[n].concat(y(r)))})),n=void 0}}return t}Object.defineProperty(n,"__esModule",{value:!0});var O,x,P=Object.defineProperty,S=function(e,n){return P(e,"name",{value:n,configurable:!0})},L=function(e,n,t){return function(e,n,t){n in e?P(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t}(e,"symbol"!==(void 0===n?"undefined":function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}(n))?n+"":n,t),t},E="https://pay.coinbase.com",A=S((function(e){var n=e.host,t=void 0===n?E:n,r=e.destinationWallets,o=v(e,["host","destinationWallets"]),c=new URL(t);return c.pathname="/buy/select-asset",c.searchParams.append("destinationWallets",JSON.stringify(r)),Object.keys(o).forEach((function(e){var n=o[e];void 0!==n&&c.searchParams.append(e,n.toString())})),c.searchParams.sort(),c.toString()}),"generateOnRampURL"),C="cbpay-embedded-onramp",I=S((function(param){var e=param.url,n=param.width,t=void 0===n?"100%":n,r=param.height,o=void 0===r?"100%":r,c=param.position,l=void 0===c?"fixed":c,d=param.top,f=void 0===d?"0px":d,iframe=document.createElement("iframe");return iframe.style.border="unset",iframe.style.borderWidth="0",iframe.style.width=t.toString(),iframe.style.height=o.toString(),iframe.style.position=l,iframe.style.top=f,iframe.id=C,iframe.src=e,iframe}),"createEmbeddedContent");(x=O||(O={})).LaunchEmbedded="launch_embedded",x.AppReady="app_ready",x.AppParams="app_params",x.SigninSuccess="signin_success",x.Success="success",x.Exit="exit",x.Event="event",x.Error="error",x.PixelReady="pixel_ready",x.OnAppParamsNonce="on_app_params_nonce";var _=S((function(e,param){var n=param.onMessage,t=param.shouldUnsubscribe,o=void 0===t||t,l=param.allowedOrigin,d=param.onValidateOrigin,f=void 0===d?S((function(){return Promise.resolve(!0)}),"onValidateOrigin"):d,h=S((function(t){var d,m=j(t.data),v=m.eventName,data=m.data,y=!l||t.origin===l;v===e&&(d=r.default.mark((function e(){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=y,!e.t0){e.next=5;break}return e.next=4,f(t.origin);case 4:e.t0=e.sent;case 5:if(!e.t0){e.next=7;break}n(data),o&&window.removeEventListener("message",h);case 7:case"end":return e.stop()}}),e)})),function(){var e=this,n=arguments;return new Promise((function(t,r){var o=d.apply(e,n);function l(e){c(o,t,r,l,f,"next",e)}function f(e){c(o,t,r,l,f,"throw",e)}l(void 0)}))})()}),"onMessage");return window.addEventListener("message",h),function(){window.removeEventListener("message",h)}}),"onBroadcastedPostMessage"),M=S((function(e){return e!==window?e:R(e)?{postMessage:function(n){return e.ReactNativeWebView.postMessage(n)}}:e.opener?e.opener:e.parent!==e.self?e.parent:void 0}),"getSdkTarget"),R=S((function(e){try{return void 0!==w([e,"access",function(e){return e.ReactNativeWebView},"optionalAccess",function(e){return e.postMessage}])}catch(e){return!1}}),"isMobileSdkTarget"),k=S((function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.allowedOrigin,o=void 0===r?"*":r,data=t.data,c=F(n,data);e.postMessage(c,o)}),"broadcastPostMessage"),j=S((function(data){try{return JSON.parse(data)}catch(e){return{eventName:data}}}),"parsePostMessage"),F=S((function(e,data){return data?JSON.stringify({eventName:e,data:data}):e}),"formatPostMessage"),N="coinbase-sdk-connect",U={width:460,height:730},T={width:430,height:600},B=function e(param){var n=param.host,t=void 0===n?E:n,r=param.appId,o=param.appParams,c=param.onReady,d=param.onFallbackOpen,f=param.debug,m=this;l(this,e),L(this,"state","loading"),L(this,"nonce",""),L(this,"eventStreamListeners",{}),L(this,"unsubs",[]),L(this,"isLoggedIn",!1),L(this,"openExperience",S((function(e){if(m.log("Attempting to open experience",{state:m.state}),"waiting_for_response"!==m.state&&"loading"!==m.state)if("failed"!==m.state){if(!m.nonce)throw new Error("Attempted to open CB Pay experience without nonce");var n=m.nonce;m.nonce="",m.setupExperienceListeners(e);var path=e.path,t=e.experienceLoggedIn,r=e.experienceLoggedOut,o=e.embeddedContentStyles,c=new URL("".concat(m.host).concat(path));c.searchParams.append("appId",m.appId),c.searchParams.append("type","secure_standalone");var l=m.isLoggedIn?t:r||t;c.searchParams.append("nonce",n);var d=c.toString();if(m.log("Opening experience",{experience:l,isLoggedIn:m.isLoggedIn}),"embedded"===l){var f=S((function(){var e=I(h({url:d},o));w([o,"optionalAccess",function(e){return e.target}])?w([document,"access",function(e){return e.querySelector},"call",function(e){return e(w([o,"optionalAccess",function(e){return e.target}]))},"optionalAccess",function(e){return e.replaceChildren},"call",function(n){return n(e)}]):document.body.appendChild(e)}),"openEmbeddedExperience");m.isLoggedIn?f():m.startDirectSignin(f)}else"popup"===l&&w([window,"access",function(e){return e.chrome},"optionalAccess",function(e){return e.windows},"optionalAccess",function(e){return e.create}])?window.chrome.windows.create({url:d,setSelfAsOpener:!0,type:"popup",focused:!0,width:U.width,height:U.height,left:window.screenLeft-U.width-10,top:window.screenTop},(function(e){m.addEventStreamListener("open",(function(){w([e,"optionalAccess",function(e){return e.id}])&&chrome.windows.update(e.id,{width:T.width,height:T.height,left:window.screenLeft-T.width-10,top:window.screenTop})}))})):"new_tab"===l&&w([window,"access",function(e){return e.chrome},"optionalAccess",function(e){return e.tabs},"optionalAccess",function(e){return e.create}])?window.chrome.tabs.create({url:d}):D(d,l);var v=S((function(){m.sendAppParams(),m.removeEventStreamListener("open",v)}),"onOpen");m.addEventStreamListener("open",v)}else w([m,"access",function(e){return e.onFallbackOpen},"optionalCall",function(e){return e()}])}),"openExperience")),L(this,"endExperience",S((function(){w([document,"access",function(e){return e.getElementById},"call",function(e){return e(C)},"optionalAccess",function(e){return e.remove},"call",function(e){return e()}])}),"endExperience")),L(this,"destroy",S((function(){w([document,"access",function(e){return e.getElementById},"call",function(e){return e(N)},"optionalAccess",function(e){return e.remove},"call",function(e){return e()}]),m.unsubs.forEach((function(e){return e()}))}),"destroy")),L(this,"addPixelReadyListener",S((function(){m.onMessage("pixel_ready",{shouldUnsubscribe:!1,onMessage:function(data){m.log("Received message: pixel_ready"),m.isLoggedIn=!!w([data,"optionalAccess",function(e){return e.isLoggedIn}]),w([m,"access",function(e){return e.removeErrorListener},"optionalCall",function(e){return e()}]),m.sendAppParams((function(){w([m,"access",function(e){return e.onReadyCallback},"optionalCall",function(e){return e()}])}))}})}),"addPixelReadyListener")),L(this,"addErrorListener",S((function(){m.removeErrorListener=m.onMessage("error",{shouldUnsubscribe:!0,onMessage:function(data){if(m.log("Received message: error"),data){var e="string"==typeof data?data:JSON.stringify(data);w([m,"access",function(e){return e.onReadyCallback},"optionalCall",function(n){return n(new Error(e))}])}}})}),"addErrorListener")),L(this,"embedPixel",S((function(){w([document,"access",function(e){return e.getElementById},"call",function(e){return e(N)},"optionalAccess",function(e){return e.remove},"call",function(e){return e()}]);var e=W({host:m.host,appId:m.appId});e.onerror=m.onFailedToLoad,m.pixelIframe=e,document.body.appendChild(e)}),"embedPixel")),L(this,"onFailedToLoad",S((function(){if(m.state="failed",m.onFallbackOpen)m.debug&&console.warn("Failed to load CB Pay pixel. Falling back to opening in new tab."),w([m,"access",function(e){return e.onReadyCallback},"optionalCall",function(e){return e()}]);else{var e=new Error("Failed to load CB Pay pixel");m.debug&&console.error(e),w([m,"access",function(e){return e.onReadyCallback},"optionalCall",function(n){return n(e)}])}}),"onFailedToLoad")),L(this,"sendAppParams",S((function(e){w([m,"access",function(e){return e.pixelIframe},"optionalAccess",function(e){return e.contentWindow}])?(m.log("Sending message: app_params"),m.onMessage("on_app_params_nonce",{onMessage:function(data){m.state="ready",m.nonce=w([data,"optionalAccess",function(e){return e.nonce}])||"",w([e,"optionalCall",function(e){return e()}])}}),m.state="waiting_for_response",k(m.pixelIframe.contentWindow,"app_params",{data:m.appParams})):(console.error("Failed to find pixel content window"),m.state="failed",w([m,"access",function(e){return e.onFallbackOpen},"optionalCall",function(e){return e()}]))}),"sendAppParams")),L(this,"setupExperienceListeners",S((function(param){var e=param.onSuccess,n=param.onExit,t=param.onEvent,r=param.onRequestedUrl;m.onMessage("event",{shouldUnsubscribe:!1,onMessage:function(data){var o=data;w([m,"access",function(e){return e.eventStreamListeners},"access",function(e){return e[o.eventName]},"optionalAccess",function(e){return e.forEach},"call",function(e){return e((function(e){return w([e,"optionalCall",function(e){return e()}])}))}]),"success"===o.eventName&&w([e,"optionalCall",function(e){return e()}]),"exit"===o.eventName&&w([n,"optionalCall",function(e){return e(o.error)}]),"request_open_url"===o.eventName&&w([r,"optionalCall",function(e){return e(o.url)}]),w([t,"optionalCall",function(e){return e(data)}])}})}),"setupExperienceListeners")),L(this,"startDirectSignin",S((function(e){var n=new URLSearchParams;n.set("appId",m.appId),n.set("type","direct");var t=D("".concat(m.host,"/signin?").concat(n.toString()),"popup");m.onMessage("signin_success",{onMessage:function(){w([t,"optionalAccess",function(e){return e.close},"call",function(e){return e()}]),e()}})}),"startDirectSignin")),L(this,"addEventStreamListener",S((function(e,n){m.eventStreamListeners[e]?w([m,"access",function(e){return e.eventStreamListeners},"access",function(n){return n[e]},"optionalAccess",function(e){return e.push},"call",function(e){return e(n)}]):m.eventStreamListeners[e]=[n]}),"addEventStreamListener")),L(this,"removeEventStreamListener",S((function(e,n){if(m.eventStreamListeners[e]){var t=w([m,"access",function(e){return e.eventStreamListeners},"access",function(n){return n[e]},"optionalAccess",function(e){return e.filter},"call",function(e){return e((function(e){return e!==n}))}]);m.eventStreamListeners[e]=t}}),"removeEventStreamListener")),L(this,"onMessage",S((function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];var r=_(n[0],h({allowedOrigin:m.host},n[1]));return m.unsubs.push(r),r}),"onMessage")),L(this,"log",S((function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];var r;m.debug&&(r=console).log.apply(r,["[CBPAY]"].concat(y(n)))}),"log")),this.host=t,this.appId=r,this.appParams=o,this.onReadyCallback=c,this.onFallbackOpen=d,this.debug=f||!1,this.addPixelReadyListener(),this.addErrorListener(),this.embedPixel(),setTimeout((function(){"ready"!==m.state&&m.onFailedToLoad()}),5e3)};function W(param){var e=param.host,n=param.appId,t=document.createElement("iframe");t.style.border="unset",t.style.borderWidth="0",t.style.width="0",t.style.height="0",t.style.height="0",t.id=N;var r=new URL("".concat(e).concat("/embed"));return r.searchParams.append("appId",n),t.src=r.toString(),t}function D(e,n){return window.open(e,"Coinbase","popup"===n?"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, height=".concat(U.height,",width=").concat(U.width):void 0)}S(B,"CoinbasePixel"),S(W,"createPixel"),S(D,"openWindow");var J={buy:"/buy",checkout:"/checkout"},V=function e(n){var t=this;if(l(this,e),L(this,"open",S((function(){var e=t.options,n=e.widget,r=e.experienceLoggedIn,o=e.experienceLoggedOut,c=e.embeddedContentStyles,l=e.onExit,d=e.onSuccess,f=e.onEvent,h=e.onRequestedUrl,m=e.closeOnSuccess,v=e.closeOnExit;t.pixel.openExperience({path:J[n],experienceLoggedIn:r,experienceLoggedOut:o,embeddedContentStyles:c,onExit:function(){w([l,"optionalCall",function(e){return e()}]),v&&t.pixel.endExperience()},onSuccess:function(){w([d,"optionalCall",function(e){return e()}]),m&&t.pixel.endExperience()},onRequestedUrl:h,onEvent:f})}),"open")),L(this,"destroy",S((function(){t.pixel.destroy()}),"destroy")),this.options=n,this.pixel=new B(m(h({},n),{appParams:h({widget:n.widget},n.appParams)})),n.target){var r=document.querySelector(n.target);r&&r.addEventListener("click",this.open)}};S(V,"CBPayInstance");var z=S((function(e,n){var t=e.experienceLoggedIn,r=void 0===t?"embedded":t,o=e.widgetParameters,c=v(e,["experienceLoggedIn","widgetParameters"]),l=new V(m(h({},c),{widget:"buy",experienceLoggedIn:r,appParams:o,onReady:function(e){e?n(e,null):n(null,l)},onFallbackOpen:function(){var e=A(h({appId:c.appId,host:c.host},o));window.open(e)}}))}),"initOnRamp");function Y(e,n){k(e,"event",{data:n})}S(Y,"broadcastEvent"),n.CBPayInstance=V,n.broadcastEvent=Y,n.broadcastPostMessage=k,n.generateOnRampURL=A,n.getSdkTarget=M,n.initOnRamp=z,n.onBroadcastedPostMessage=_}}]);